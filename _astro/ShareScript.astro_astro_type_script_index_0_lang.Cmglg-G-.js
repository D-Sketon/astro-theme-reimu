const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/browser.CJsOu9jy.js","_astro/_commonjsHelpers.Cpj98o6Y.js","_astro/snapdom.W_cK_lPU.js","_astro/preload-helper.CJacXwkj.js"])))=>i.map(i=>d[i]);
import{_ as l}from"./preload-helper.CJacXwkj.js";const d=()=>{const s=document.querySelector(".share-icon-weixin");s&&s.addEventListener("click",function(a){const i=this.getBoundingClientRect(),r=this.querySelector("#share-weixin");if(i.x-148<0?r.style.left=`-${i.x-10}px`:i.x+172>window.innerWidth?r.style.left=`-${310-window.innerWidth+i.x}px`:r.style.left="-138px",console.log(a.target),a.target===this){console.log("click weixin");const e=r;if(!e)return;if(!e.classList.contains("active"))e.style.display="block",requestAnimationFrame(()=>{e.classList.add("active")});else{e.classList.remove("active");const t=c=>{c.propertyName==="opacity"&&(e.style.display="none",e.removeEventListener("transitionend",t))};e.addEventListener("transitionend",t)}}if(document.querySelector(".share-weixin-canvas")?.children.length)return;const{cover:u,desc:h,title:x,author:m}=window.__REIMU_POST__;document.querySelector("#share-weixin-banner").src=u,document.querySelector("#share-weixin-title").innerText=x,document.querySelector("#share-weixin-desc").innerText=h,document.querySelector("#share-weixin-author").innerText="By: "+m,l(()=>import("./browser.CJsOu9jy.js").then(e=>e.b),__vite__mapDeps([0,1])).then(e=>{e.toDataURL(window.__REIMU_POST__.url,function(t,c){if(t){console.error(t);return}document.querySelector("#share-weixin-qr").src=c,l(async()=>{const{snapdom:o}=await import("./snapdom.W_cK_lPU.js").then(n=>n.s);return{snapdom:o}},__vite__mapDeps([2,3])).then(({snapdom:o})=>{o.toPng(document.querySelector(".share-weixin-dom")).then(n=>{document.querySelector(".share-weixin-canvas")?.appendChild(n)}).catch(()=>{document.querySelector("#share-weixin-banner")?.remove(),o.toPng(document.querySelector(".share-weixin-dom")).then(n=>{document.querySelector(".share-weixin-canvas")?.appendChild(n)}).catch(()=>{console.error("Failed to generate weixin share image.")})})})})})})};d();document.addEventListener("astro:after-swap",d);
